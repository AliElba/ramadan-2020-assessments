<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Semicolon | video request</title>
    <link
            rel="stylesheet"
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    />
</head>
<body>
<div class="container my-5">
    <div class="formContainer my-5">
        <form id="formVideoRequest">
            <div class="row">
                <div class="col-md">
                    <div class="form-group">
                        <label for="author_name">Your name *</label>
                        <input id="author_name"
                               class="form-control"
                               name="author_name"
                               placeholder="Write your name here"
                        />
                    </div>
                </div>
                <div class="col-md">
                    <div class="form-group">
                        <label for="author_email">Your email *</label>
                        <input id="author_email"
                               class="form-control"
                               name="author_email"
                               placeholder="Write your email here"
                        />
                    </div>
                </div>
            </div>
            <hr/>
            <div class="row">
                <div class="col-md">
                    <div class="form-group">
                        <label for="topic_title">Topic *</label>
                        <input id="topic_title"
                               class="form-control"
                               name="topic_title"
                               placeholder="Write your suggested topic here"
                        />
                    </div>
                </div>
                <div class="col-md">
                    <div class="form-group">
                        <label for="target_level">Target level</label>
                        <select id="target_level"
                                class="form-control"
                                name="target_level"
                                placeholder="Write your name here"
                        >
                            <option value="begineer">Beginner</option>
                            <option value="medium">Medium</option>
                            <option value="advanced">Advanced</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md">
                    <div class="form-group">
                        <label for="topic_details">More details *</label>
                        <textarea id="topic_details"
                                  class="form-control"
                                  name="topic_details"
                                  placeholder="Write your topic in more details here"
                        ></textarea>
                    </div>
                </div>
                <div class="col-md">
                    <div class="form-group">
                        <label for="expected_result">Expected results</label>
                        <textarea id="expected_result"
                                  class="form-control"
                                  name="expected_result"
                                  placeholder="Write what do you expect after watching this video"
                        ></textarea>
                    </div>
                </div>
            </div>

            <button type="submit" class="btn btn-success mt-3">
                Send video request
            </button>
        </form>
    </div>
    <hr/>
    <h1 class="mb-4">List of requested videos</h1>
    <div id="listOfRequests">
        <div class="card mb-3">
            <div class="card-body d-flex justify-content-between flex-row">
                <div class="d-flex flex-column">
                    <h3>Dummy Topic title</h3>
                    <p class="text-muted mb-2">dummy topic details</p>
                    <p class="mb-0 text-muted">
                        <strong>Expected results:</strong> Dummy expected result text
                    </p>
                </div>
                <div class="d-flex flex-column text-center">
                    <a class="btn btn-link">ðŸ”º</a>
                    <h3>0</h3>
                    <a class="btn btn-link">ðŸ”»</a>
                </div>
            </div>
            <div class="card-footer d-flex flex-row justify-content-between">
                <div>
                    <span class="text-info">NEW</span>
                    &bullet; added by <strong>Fake Name</strong> on
                    <strong>Sat Apr 11 2020</strong>
                </div>
                <div
                        class="d-flex justify-content-center flex-column 408ml-auto mr-2"
                >
                    <div class="badge badge-success">
                        Beginners
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">

    /*document.addEventListener('DOMContentLoaded', function () { //once the dom loaded even before the image are loaded vs window.
        const contactForm = document.getElementById("formVideoRequest");
        contactForm.addEventListener("submit", function (event) {
            event.preventDefault(); // don't search for any other action on the page which will avoid the post back event

            let request = new XMLHttpRequest();
            let url = "http://localhost:7777/video-request";
            request.open("POST", url, true);
            request.setRequestHeader("Content-Type", "application/json");
            request.onreadystatechange = function () {
                if (request.readyState === 4 && request.status === 200) {
                    let responseData = JSON.parse(request.response);
                    console.log(responseData);
                }
            };
            let author_name = document.getElementById("author_name").value;
            let author_email = document.getElementById("author_email").value;
            let topic_title = document.getElementById("topic_title").value;
            let target_level = document.getElementById("target_level").value;
            let topic_details = document.getElementById("topic_details").value;
            let expected_result = document.getElementById("expected_result").value;

            let data = JSON.stringify({
                "author_name": author_name,
                "author_email": author_email,
                "topic_title": topic_title,
                "target_level": target_level,
                "topic_details": topic_details,
                "expected_result": expected_result
            });

            request.send(data);
        });
    });*/

    document.addEventListener('DOMContentLoaded', function () { //once the dom loaded even before the image are loaded vs window.
        const formVideoRequest = document.getElementById("formVideoRequest");
        formVideoRequest.addEventListener("submit", function (event) {
            event.preventDefault(); // don't search for any other action on the page which will avoid the post back event

            let author_name = document.getElementById("author_name").value;
            let author_email = document.getElementById("author_email").value;
            let topic_title = document.getElementById("topic_title").value;
            let target_level = document.getElementById("target_level").value;
            let topic_details = document.getElementById("topic_details").value;
            let expected_result = document.getElementById("expected_result").value;

            let data = JSON.stringify({
                "author_name": author_name,
                "author_email": author_email,
                "topic_title": topic_title,
                "target_level": target_level,
                "topic_details": topic_details,
                "expected_result": expected_result
            });

            const formData = new FormData(formVideoRequest); //get all form data elements which has already name attribute on it
            fetch('http://localhost:7777/video-request', {
                method: 'POST',
                // body: formData
                body: data
            })
                .then((bold) => bold.json())
                .then((data) => {
                    console.log(data);
                });
        });
    });
</script>

</body>
</html>
